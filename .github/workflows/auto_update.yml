name: Auto Update Frontend

on:
  workflow_dispatch: # –∑–∞–ø—É—Å–∫ –≤—Ä—É—á–Ω—É—é
  push:
    branches:
      - master

jobs:
  update:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Apply local template updates
        run: |
          echo "üß† Applying template updates..."
          # –ó–¥–µ—Å—å –ø—Ä–∏–º–µ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞:
          sed -i 's/–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏/–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –¥–∞—Ç–µ/' index.html || true
          sed -i 's/currentSort = .*/currentSort = "time"/' script.js || true
          echo "‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–Ω–µ—Å–µ–Ω—ã –ª–æ–∫–∞–ª—å–Ω–æ."

      - name: Commit & Push
        run: |
          git config --global user.name "kirgorkir33-sudo"
          git config --global user.email "bot@example.com"
          git add .
          git commit -m "ü§ñ Auto update from template" || echo "No changes"
          git push
        env:
          GITHUB_TOKEN: ${{ secrets.ACCESS_TOKEN }}
